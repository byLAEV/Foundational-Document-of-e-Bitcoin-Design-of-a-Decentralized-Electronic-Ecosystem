# TUC Layer 0 — Deterministic Pulsation & Horizon Shift (N=10)
**Tiempo Universal por Consenso (TUC)** — Proof of Concept (PoC)  
**Designed by LAEV Blockchain** — Author: Lerry Alexander Elizondo Villalobos (LAEV)

## 1. Overview
This repository contains a **Layer 0 PoC** for TUC (Tiempo Universal por Consenso): a deterministic model where each validated **present block** simultaneously:
- anchors **past evidence** (cryptographic continuity), and
- enables a **future horizon** of reservable time coordinates (*slots*).

The PoC materializes the concept as a **Hash Paper**: an append-only file where each record is chained by hash, making the timeline **tamper-evident**.

## 2. Core Concept: Horizon Shift (N=10)
TUC time is not “waiting”; it is a **constant pulsation** (*ticks/slots*).  
Given a planning margin **N = 10**, the protocol maintains an always-active horizon of **10 future slots** ahead of the present.

### Horizon mechanics (deterministic)
- **Block 0 (Genesis / Present Threshold)**: when finalized, it reserves slots **1..10**.
- **Block 1 (T+1 tick)**: when finalized, it shifts the horizon and enables **slot 11**.
- **Block 2 (T+2 ticks)**: enables **slot 12**.
- **Block i**: enables **slot (i + N)**.

**Invariant:** Under operational consensus and minimal network conditions, there are always **exactly N future slots** available ahead of the present.

> Important note (engineering correctness):  
> In this PoC, “1 tick = 1 second” is a simulation parameter.  
> In production, the tick cadence is a **protocol-defined logical time**, not wall-clock truth.

## 3. Definitions (audit-grade)
- **Present Threshold (PT):** consensus decision point where a block becomes finalized.
- **Window (W):** planning horizon expressed in protocol units (ticks/slots) with a WindowID.
- **N (Planning Margin):** number of future slots enabled by each present block, **set by consensus** and written into the block.
- **Future Slot (Sᵢ):** a reserved time coordinate; it is not history, it is **structured capacity**.
- **Past Anchor (Aₜ):** cryptographic commitment of relevant history (e.g., Merkle root).
- **Template Commitment (Cₜ):** commitment of the enabled future slot template (e.g., Merkle root of slot identifiers + rules).

## 4. Layer 0 Data Model (Hash Paper Record)
Each block record MUST be self-verifiable and MUST include:

- `index` (t)
- `prev_hash`
- `timestamp` (simulation / metadata)
- `author`
- `window_id`
- `N`
- `past_anchor` (Aₜ)
- `future_slots_enabled` (or a compact representation)
- `template_commitment` (Cₜ)
- `consensus` (operational consensus evidence)
- `current_hash` (hash of the canonical serialized record)

### Recommended `consensus` structure (simulation)
- `quorum_required`
- `votes_total`
- `votes_approve`
- `finalized` (true/false)
- `reason` / `notes` (optional)

## 5. How the PoC Works
### Step 1 — Genesis (Block 0)
- Sets `N = 10`
- Defines `window_id`
- Enables future slots `1..10`
- Computes `template_commitment` over these slots
- Writes the genesis record to the Hash Paper file

### Step 2 — Deterministic pulsation
For each tick `i = 1..k`:
- The network finalizes Block `i` at Present Threshold
- The block deterministically enables **slot (i + N)**
- The record is hashed and appended to the file
- Hash chaining creates an audit trail: `prev_hash -> current_hash`

### Step 3 — Verification
A verifier can:
- recompute each `current_hash` from block fields,
- validate the `prev_hash` linkage,
- validate that enabled slot == `index + N`,
- validate the template commitment rules (if implemented as a Merkle commitment).

## 6. Repository Layout (suggested)
- `tuc_layer0_pulsation.py`  
  Single-node deterministic pulsation + Hash Paper output.
- `tuc_node_simulation.py`  
  Multi-node simulation (primary + backup) with consensus gating and catch-up.
- `TUC_Capa0_Pulsacion.hash`  
  Output file generated by the PoC (append-only).

## 7. Running the Simulation
### Single-node pulsation
```bash
python tuc_layer0_pulsation.py --N 10 --steps 10 --tick_seconds 1

Multi-node (primary + backup)

python tuc_node_simulation.py --N 10 --steps 30 --quorum 0.51

8. Security and Audit Properties (Layer 0)

Deterministic transition: given block t and parameter N, the enabled slot is unique: t + N.

Tamper evidence: any modification breaks hash continuity (prev_hash mismatch).

No “time fiction”: future is not predicted; it is reserved capacity (slots).

Continuity constraint: while operational consensus and minimal network conditions hold, the horizon remains constant-length.


9. Roadmap (Layer 1+)

Formal Merkle-based template_commitment with canonical slot serialization

Slot validity proofs: “this block belongs to enabled slot Sᵢ”

Catch-up protocol: node restart loads last record and re-syncs missing blocks

Network transport simulation: gossip + conflict resolution under safety-first rules


10. Attribution

Designed by LAEV Blockchain
Author: Lerry Alexander Elizondo Villalobos (LAEV)
All conceptual claims and architectural design of TUC are attributed to the author above.

---

# Mejoras inmediatas al PoC (sin inventar nada, solo cerrando auditoría)

## A) Agregar “Consenso Operativo” (como pedías)
Sí: es correcto agregarlo, pero con una regla clara:

- **El bloque solo se ancla al Hash Paper si `consensus.finalized == true`.**
- Si no hay finalización, el pulso puede “existir” como intento, pero **no entra al registro oficial**.

Campos mínimos recomendados:
- `quorum_required` (ej. 0.51),
- `votes_total`, `votes_approve`,
- `finalized` boolean,
- `finality_id` o `round_id` (para trazabilidad de rondas).

## B) Corrección obligatoria al ejemplo de 2 nodos
En tu snippet actual, el génesis no prueba nada porque el hash está fijo. Un auditor te va a decir: “esto es un log, no una prueba”.

Regla: **todos los `current_hash` deben derivarse de serialización canónica** (JSON ordenado, sin `current_hash` incluido al hashear, etc.).

## C) No mezclar “segundos” con “tiempo del protocolo”
Tu frase correcta para README/whitepaper:

> “En esta PoC, la cadencia de tick se parametriza a 1 segundo para observabilidad. En el protocolo, el tick es tiempo lógico y su mapeo a tiempo físico es una capa externa.”

---
